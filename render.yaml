services:
  # Backend API Service
  - type: web
    name: detective-conan-api
    env: node
    plan: free
    buildCommand: "npm install"
    startCommand: "npm start"
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 10000
      - key: SUPABASE_URL
        sync: false
      - key: SUPABASE_KEY
        sync: false
      - key: ADMIN_SECRET
        sync: false
      - key: FRONTEND_URL
        value: https://detective-conan-frontend.onrender.com

  # Frontend Static Service
  - type: web
    name: detective-conan-frontend
    env: static
    plan: free
    buildCommand: "echo 'No build needed for static site'"
    staticPublishPath: ./frontend
    envVars:
      - key: REACT_APP_API_URL
        value: https://detective-conan-api.onrender.com
